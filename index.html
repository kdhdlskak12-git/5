<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>기계식주차장 과태료 진단 셀프 테스트</title>
  <style>
    :root{
      --bg:#e3f2fd; --ink:#000; --card:#fff; --btn:#0e7c86; --btn-hover:#0c6a72;
    }
    body{margin:0;font-family:"Pretendard",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple SD Gothic Neo","Noto Sans KR","Malgun Gothic","맑은 고딕",sans-serif;background:linear-gradient(135deg,#ffffff,#e3f2fd);color:var(--ink);display:flex;align-items:center;justify-content:center;min-height:100vh}
    .app{width:95%;max-width:900px;margin:0 auto;padding:16px}

    /* ✅ 첫 화면 전용 */
    .hero-first{background:var(--card);border-radius:20px;padding:20px;box-shadow:0 8px 16px rgba(0,0,0,.08);text-align:center;aspect-ratio:16/9;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .hero-first img.logo{max-width:300px;width:100%;height:auto;margin-bottom:12px}
    .hero-first h1{margin:12px 0 8px;font-size:clamp(20px,5vw,32px)}
    .hero-first p{margin:6px 0 0;opacity:.95}
    .stat{display:inline-block;margin-top:10px;padding:6px 14px;border-radius:999px;background:rgba(0,0,0,.05);font-weight:700}

    .card{background:var(--card);border-radius:20px;padding:20px;margin-top:18px;box-shadow:0 10px 16px rgba(0,0,0,.06)}
    .btn{appearance:none;border:none;background:var(--btn);color:#fff;font-weight:800;padding:12px 18px;border-radius:18px;cursor:pointer;font-size:16px;box-shadow:0 8px 14px rgba(0,0,0,.15)}
    .btn:hover{background:var(--btn-hover)}
    .opt{display:block;width:100%;text-align:center;padding:14px;margin:10px 0;border-radius:16px;background:#e3f2fd;color:var(--ink);font-weight:800;cursor:pointer;font-size:clamp(16px,4vw,20px)}
    .muted{opacity:.85}
    .result-head{text-align:center}
    .result-head h2{margin:0 0 8px}
    .section-title{font-weight:800;margin:12px 0 10px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .cell{background:#b6eef2;border-radius:16px;padding:14px 16px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:64px;cursor:pointer;text-align:center}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;font-weight:800;margin-top:6px}
    .pill.ok{background:#dcfce7;color:#14532d}
    .pill.no{background:#fee2e2;color:#7f1d1d}
    .detail-card{margin-top:16px;background:#fff;border-radius:16px;padding:16px;box-shadow:0 6px 12px rgba(0,0,0,.1)}
    .detail-card h3{margin:0 0 8px}
    .footer{margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .hide{display:none}
    .back-btn{margin-top:12px;display:block;width:100%}
  </style>
</head>
<body>
  <div class="app">
    <!-- ✅ 인트로 -->
    <section id="screen-start" class="hero-first">
      <img src="assets/images/ts_logo.png" alt="TS 한국교통안전공단" class="logo" />
      <h1>기계식주차장 과태료 진단 셀프 테스트</h1>
      <div class="stat">지금까지 참가자: <span id="participantCount">0</span> 명</div>
      <p>나는 기계식주차장 안전 관리에 대해 얼마나 알고 있을까? 모르면 모를수록 커지는 과태료</p>
      <button id="btnStart" class="btn">테스트 시작하기</button>
    </section>

    <!-- 퀴즈 -->
    <section id="screen-quiz" class="card hide">
      <h2 id="qTitle"></h2>
      <div id="optWrap"></div>
      <button id="btnBack" class="btn back-btn hide">뒤로가기</button>
    </section>

    <!-- 결과 -->
    <section id="screen-result" class="card hide">
      <div class="result-head">
        <h2>내 안전이해도</h2>
        <div class="muted">정답 <b id="score"></b> / <span id="totalQ"></span> · 예상 과태료 <b id="penaltyWon"></b>원</div>
        <div class="muted" id="penaltyHundred"></div>
      </div>
      <div class="section-title">항목별 이행 여부</div>
      <div id="grid"></div>
      <div id="detailBox" class="detail-card hide"></div>
      <div class="footer">
        <button id="btnRetry" class="btn">다시하기</button>
        <button id="btnShare" class="btn">공유하기</button>
      </div>
    </section>
  </div>

  <script>
    const QUIZ = [
      {title: '20대 이상의 기계식주차장치를 운영하는 기계식주차장관리자 등은 배상보험에 가입하지 않아도 된다?',answer: 'X',fine: 5000000,law: `과태료 500만원 이하...`},
      {title: '기계식주차장을 사용하지 않아도 사용검사 또는 정기검사의 검사를 받지 않아도 된다?',answer: 'X',fine: 1000000,law: `과태료 100만원 이하...`},
      {title: '자체점검을 년 1회 실시해서 그 점검기록을 기계식주차장 정보망에 입력하여야 한다.',answer: 'X',fine: 1000000,law: `과태료 100만원 이하...`},
      {title: '검사확인증이나 기계식주차장의 사용을 금지하는 표지를 꼭 부착하여야 한다.',answer: 'O',fine: 500000,law: `과태료 50만원 이하...`},
      {title: '기계식주차장에 관련된 안내문은 꼭 부착하지 않아도 된다.',answer: 'X',fine: 500000,law: `과태료 50만원 이하...`},
      {title: '기계식주차장에서 중대한 사고가 발생한 경우 1주일 이내에만 통보하면 된다.',answer: 'X',fine: 5000000,law: `과태료 500만원 이하...`},
      {title: '중대한 사고가 발생했을 때, 인명구조 등 긴급한 사유가 있는 경우에는 중대한 사고와 관련되는 물건을 이동시키거나 변경 또는 훼손하여도 된다.',answer: 'O',fine: 5000000,law: `과태료 500만원 이하...`},
      {title: '기계식주차장관리자 등은 기계식주차장치 관리인을 선임 또는 변경한 경우에는 선임 또는 변경 후 한달 이내에 시장ㆍ군수 또는 구청장에게 통보하여야 한다.',answer: 'X',fine: 500000,law: `과태료 50만원 이하...`}
    ];

    const CATEGORIES = ['보상책임 여부','검사 이행 여부','자체점검 여부','표지 부착 여부','안내문 부착 여부','사고 즉시 통보 여부','사고현장 보존 여부','관리인 통보 여부'];
    const state = { step:0, answers:[] };
    const $ = s=>document.querySelector(s);
    const screenStart=$('#screen-start'), screenQuiz=$('#screen-quiz'), screenResult=$('#screen-result');
    const btnStart=$('#btnStart'), btnRetry=$('#btnRetry'), btnShare=$('#btnShare'), btnBack=$('#btnBack');
    const qTitle=$('#qTitle'), optWrap=$('#optWrap');
    const participantCountEl=$('#participantCount');
    const scoreEl=$('#score'), totalQEl=$('#totalQ'), penaltyWonEl=$('#penaltyWon'), penaltyHundredEl=$('#penaltyHundred');
    const gridEl=$('#grid'), detailBox=$('#detailBox');

    const LS_KEY_PARTICIPANTS='quiz_participants';
    function getParticipants(){ const n=parseInt(localStorage.getItem(LS_KEY_PARTICIPANTS)||'0',10); return isNaN(n)?0:n; }
    function incParticipants(){ const n=getParticipants()+1; localStorage.setItem(LS_KEY_PARTICIPANTS,String(n)); renderParticipants(); }
    function renderParticipants(){ participantCountEl.textContent=getParticipants().toLocaleString('ko-KR'); }

    function show(el){ [screenStart,screenQuiz,screenResult].forEach(e=>e.classList.add('hide')); el.classList.remove('hide'); }
    function renderQuestion(){ const q=QUIZ[state.step]; qTitle.textContent=q.title; optWrap.innerHTML=''; ['O','X'].forEach(choice=>{ const btn=document.createElement('button'); btn.className='opt'; btn.textContent=choice; btn.onclick=()=>selectAnswer(choice); optWrap.appendChild(btn); }); btnBack.classList.toggle('hide', state.step===0); }
    function selectAnswer(choice){ state.answers[state.step]={choice}; if(state.step<QUIZ.length-1){ state.step++; renderQuestion(); show(screenQuiz);} else { finish(); } }
    function finish(){ let correct=0, totalFine=0; QUIZ.forEach((q,i)=>{ const a=state.answers[i]?.choice; if(a===q.answer) correct++; else totalFine+=q.fine; }); scoreEl.textContent=String(correct); totalQEl.textContent=String(QUIZ.length); penaltyWonEl.textContent=totalFine.toLocaleString('ko-KR'); penaltyHundredEl.textContent=`응답자의 과태료는 ${(totalFine/1000000)}백만원 이하입니다.`; gridEl.innerHTML=''; for(let i=0;i<8;i+=2){ const row=document.createElement('div'); row.className='grid2'; row.appendChild(renderCell(i)); row.appendChild(renderCell(i+1)); gridEl.appendChild(row); } incParticipants(); show(screenResult);}
    function renderCell(idx){ const label=CATEGORIES[idx]||''; const cell=document.createElement('div'); cell.className='cell'; if(!label){ cell.innerHTML='&nbsp;'; return cell; } const q=QUIZ[idx]; const userAns=state.answers[idx]?.choice; const ok= userAns===q.answer; cell.innerHTML=`<div>${label}</div><span class="pill ${ok?'ok':'no'}">${ok?'이행 ✅':'미이행 ❌'} (${(q.fine/10000)}만원 이하)</span>`; cell.onclick=()=>showDetail(idx); return cell;}
    function showDetail(idx){ const q=QUIZ[idx]; if(!q) return; const userAns=state.answers[idx]?.choice || '-'; detailBox.innerHTML = `<h3>${CATEGORIES[idx]}</h3><p><strong>문제:</strong> ${q.title}</p><p><strong>내 답변:</strong> ${userAns}</p><p><strong>정답:</strong> ${q.answer}</p><p><strong>과태료:</strong> ${(q.fine/10000)}만원 이하</p><pre style="white-space:pre-wrap;background:#f3f3f3;padding:10px;border-radius:8px;">${q.law}</pre><button class="btn" onclick="document.getElementById('detailBox').classList.add('hide')">뒤로가기</button>`; detailBox.classList.remove('hide'); detailBox.scrollIntoView({behavior:'smooth'});}
    function sharePage(){ const url=location.href; if(navigator.share){ navigator.share({title:document.title,url}).catch(()=>{});} else { navigator.clipboard.writeText(url).then(()=>alert('페이지 링크가 복사되었습니다.')); } }

    btnStart.onclick=()=>{ state.step=0; state.answers=[]; renderQuestion(); show(screenQuiz); };
    btnRetry.onclick=()=>{ state.step=0; state.answers=[]; show(screenStart); };
    btnShare.onclick=sharePage;
    btnBack.onclick=()=>{ if(state.step>0){ state.step--; renderQuestion(); show(screenQuiz);} else { show(screenStart);} };
    renderParticipants();
  </script>
</body>
</html>

